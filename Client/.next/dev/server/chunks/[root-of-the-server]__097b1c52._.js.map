{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/NewsBlitz/Client/lib/supabase/client.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\n// Get Supabase URL and key from environment\r\n// Use server-side env vars if available, fallback to public vars\r\nconst supabaseUrl = process.env.SUPABASE_URL || process.env.NEXT_PUBLIC_SUPABASE_URL || '';\r\nconst supabaseAnonKey = process.env.SUPABASE_ANON_KEY || process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '';\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  if (typeof window === 'undefined') {\r\n    // Server-side: throw error\r\n    throw new Error('Missing Supabase environment variables: SUPABASE_URL and SUPABASE_ANON_KEY (or NEXT_PUBLIC_ variants)');\r\n  }\r\n  // Client-side: warn but don't throw (allows app to load)\r\n  console.warn('Supabase environment variables not configured');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n  auth: {\r\n    persistSession: false,\r\n  },\r\n});\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,4CAA4C;AAC5C,iEAAiE;AACjE,MAAM,cAAc,QAAQ,GAAG,CAAC,YAAY,oFAA4C;AACxF,MAAM,kBAAkB,QAAQ,GAAG,CAAC,iBAAiB,4PAAiD;AAEtG;;AASO,MAAM,WAAW,IAAA,gMAAY,EAAC,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;IAClB;AACF"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///E:/NewsBlitz/Client/lib/news/repository.ts"],"sourcesContent":["import { supabase } from '../supabase/client';\r\nimport type { NewsArticle } from '../../src/shared/schema';\r\n\r\n// Database article type (matches Supabase schema)\r\ntype DBArticle = {\r\n  id: string;\r\n  category: string;\r\n  title: string;\r\n  summary: string;\r\n  image_url: string | null;\r\n  source: string;\r\n  published_at: string | null;\r\n  article_url: string;\r\n  raw: Record<string, unknown>;\r\n  created_at: string;\r\n};\r\n\r\nexport async function getAllNews(): Promise<NewsArticle[]> {\r\n  const { data, error } = await supabase\r\n    .from('news_articles')\r\n    .select('*')\r\n    .order('published_at', { ascending: false, nullsFirst: false });\r\n\r\n  if (error) {\r\n    throw new Error(`Failed to fetch news: ${error.message}`);\r\n  }\r\n\r\n  // Transform DBArticle to NewsArticle format expected by frontend\r\n  return (data || []).map(transformDBArticleToNewsArticle);\r\n}\r\n\r\n/**\r\n * Transform database article to frontend NewsArticle format\r\n */\r\nfunction transformDBArticleToNewsArticle(dbArticle: DBArticle): NewsArticle {\r\n  // Default image if none provided (same as used in Python ingestion)\r\n  const defaultImage = \"https://media.istockphoto.com/id/1409309637/vector/breaking-news-label-banner-isolated-vector-design.jpg?s=2048x2048&w=is&k=20&c=rHMT7lr46TFGxQqLQHvSGD6r79AIeTVng-KYA6J1XKM=\";\r\n\r\n  // Ensure imageUrl is never empty - use default if null, undefined, or empty string\r\n  const imageUrl = dbArticle.image_url && dbArticle.image_url.trim() !== ''\r\n    ? dbArticle.image_url\r\n    : defaultImage;\r\n\r\n  // Use published_at if available, otherwise fallback to created_at (never use today's date)\r\n  const articleDate = dbArticle.published_at\r\n    ? new Date(dbArticle.published_at)\r\n    : new Date(dbArticle.created_at);\r\n\r\n  // Ensure readMoreUrl is never empty\r\n  const readMoreUrl = dbArticle.article_url && dbArticle.article_url.trim() !== ''\r\n    ? dbArticle.article_url\r\n    : '#';\r\n\r\n  return {\r\n    id: dbArticle.id, // Unique database ID for React keys\r\n    news_number: dbArticle.raw?.news_number as number || 0,\r\n    title: dbArticle.title,\r\n    imageUrl: imageUrl,\r\n    category: dbArticle.category,\r\n    publisher: dbArticle.source,\r\n    description: dbArticle.summary || '',\r\n    date: articleDate,\r\n    readMoreUrl: readMoreUrl,\r\n  };\r\n}\r\n\r\nexport async function getNewsByCategory(category: string): Promise<DBArticle[]> {\r\n  const { data, error } = await supabase\r\n    .from('news_articles')\r\n    .select('*')\r\n    .eq('category', category)\r\n    .order('published_at', { ascending: false, nullsFirst: false });\r\n\r\n  if (error) {\r\n    throw new Error(`Failed to fetch news by category: ${error.message}`);\r\n  }\r\n\r\n  return (data || []) as DBArticle[];\r\n}\r\n\r\nexport async function insertNewsArticle(article: Omit<DBArticle, 'id' | 'created_at'>): Promise<DBArticle> {\r\n  const { data, error } = await supabase\r\n    .from('news_articles')\r\n    .insert(article)\r\n    .select()\r\n    .single();\r\n\r\n  if (error) {\r\n    throw new Error(`Failed to insert article: ${error.message}`);\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport async function insertNewsArticles(articles: Omit<DBArticle, 'id' | 'created_at'>[]): Promise<DBArticle[]> {\r\n  const { data, error } = await supabase\r\n    .from('news_articles')\r\n    .insert(articles)\r\n    .select();\r\n\r\n  if (error) {\r\n    throw new Error(`Failed to insert articles: ${error.message}`);\r\n  }\r\n\r\n  return data || [];\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAiBO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,uIAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,KAAK,CAAC,gBAAgB;QAAE,WAAW;QAAO,YAAY;IAAM;IAE/D,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,MAAM,OAAO,EAAE;IAC1D;IAEA,iEAAiE;IACjE,OAAO,CAAC,QAAQ,EAAE,EAAE,GAAG,CAAC;AAC1B;AAEA;;CAEC,GACD,SAAS,gCAAgC,SAAoB;IAC3D,oEAAoE;IACpE,MAAM,eAAe;IAErB,mFAAmF;IACnF,MAAM,WAAW,UAAU,SAAS,IAAI,UAAU,SAAS,CAAC,IAAI,OAAO,KACnE,UAAU,SAAS,GACnB;IAEJ,2FAA2F;IAC3F,MAAM,cAAc,UAAU,YAAY,GACtC,IAAI,KAAK,UAAU,YAAY,IAC/B,IAAI,KAAK,UAAU,UAAU;IAEjC,oCAAoC;IACpC,MAAM,cAAc,UAAU,WAAW,IAAI,UAAU,WAAW,CAAC,IAAI,OAAO,KAC1E,UAAU,WAAW,GACrB;IAEJ,OAAO;QACL,IAAI,UAAU,EAAE;QAChB,aAAa,UAAU,GAAG,EAAE,eAAyB;QACrD,OAAO,UAAU,KAAK;QACtB,UAAU;QACV,UAAU,UAAU,QAAQ;QAC5B,WAAW,UAAU,MAAM;QAC3B,aAAa,UAAU,OAAO,IAAI;QAClC,MAAM;QACN,aAAa;IACf;AACF;AAEO,eAAe,kBAAkB,QAAgB;IACtD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,uIAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,UACf,KAAK,CAAC,gBAAgB;QAAE,WAAW;QAAO,YAAY;IAAM;IAE/D,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,kCAAkC,EAAE,MAAM,OAAO,EAAE;IACtE;IAEA,OAAQ,QAAQ,EAAE;AACpB;AAEO,eAAe,kBAAkB,OAA6C;IACnF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,uIAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,SACP,MAAM,GACN,MAAM;IAET,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,MAAM,OAAO,EAAE;IAC9D;IAEA,OAAO;AACT;AAEO,eAAe,mBAAmB,QAAgD;IACvF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,uIAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,UACP,MAAM;IAET,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,MAAM,OAAO,EAAE;IAC/D;IAEA,OAAO,QAAQ,EAAE;AACnB"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///E:/NewsBlitz/Client/app/api/news/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { getAllNews } from '../../../lib/news/repository';\r\n\r\nexport async function GET() {\r\n  try {\r\n    const news = await getAllNews();\r\n    \r\n    // Transform to match frontend expectations (grouped by category)\r\n    // Frontend expects: { category: Article[] }\r\n    const groupedNews: Record<string, typeof news> = {};\r\n    \r\n    for (const article of news) {\r\n      const category = article.category || 'All';\r\n      if (!groupedNews[category]) {\r\n        groupedNews[category] = [];\r\n      }\r\n      groupedNews[category].push(article);\r\n    }\r\n\r\n    return NextResponse.json(groupedNews);\r\n  } catch (error) {\r\n    console.error('Error fetching news:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch news' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,OAAO,MAAM,IAAA,yIAAU;QAE7B,iEAAiE;QACjE,4CAA4C;QAC5C,MAAM,cAA2C,CAAC;QAElD,KAAK,MAAM,WAAW,KAAM;YAC1B,MAAM,WAAW,QAAQ,QAAQ,IAAI;YACrC,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;gBAC1B,WAAW,CAAC,SAAS,GAAG,EAAE;YAC5B;YACA,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC;QAC7B;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAuB,GAChC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}