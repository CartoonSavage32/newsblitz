{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/NewsBlitz/Client/lib/supabase/client.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\n// Get Supabase URL and key from environment\r\n// Use server-side env vars if available, fallback to public vars\r\nconst supabaseUrl = process.env.SUPABASE_URL || process.env.NEXT_PUBLIC_SUPABASE_URL || '';\r\nconst supabaseAnonKey = process.env.SUPABASE_ANON_KEY || process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '';\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  if (typeof window === 'undefined') {\r\n    // Server-side: throw error\r\n    throw new Error('Missing Supabase environment variables: SUPABASE_URL and SUPABASE_ANON_KEY (or NEXT_PUBLIC_ variants)');\r\n  }\r\n  // Client-side: warn but don't throw (allows app to load)\r\n  console.warn('Supabase environment variables not configured');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n  auth: {\r\n    persistSession: false,\r\n  },\r\n});\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,4CAA4C;AAC5C,iEAAiE;AACjE,MAAM,cAAc,QAAQ,GAAG,CAAC,YAAY,oFAA4C;AACxF,MAAM,kBAAkB,QAAQ,GAAG,CAAC,iBAAiB,4PAAiD;AAEtG;;AASO,MAAM,WAAW,IAAA,gMAAY,EAAC,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;IAClB;AACF"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///E:/NewsBlitz/Client/lib/supabase/migrate.ts"],"sourcesContent":["import { supabase } from './client';\r\n\r\n/**\r\n * Check if the news_articles table exists\r\n */\r\nexport async function tableExists(): Promise<boolean> {\r\n    try {\r\n        const { error } = await supabase\r\n            .from('news_articles')\r\n            .select('id')\r\n            .limit(1);\r\n\r\n        // If no error, table exists\r\n        if (!error) return true;\r\n\r\n        // Check if error is specifically about table not existing\r\n        if (error.message?.includes('does not exist') ||\r\n            error.message?.includes('schema cache') ||\r\n            error.message?.includes('relation') && error.message?.includes('does not exist')) {\r\n            return false;\r\n        }\r\n\r\n        // Other errors might mean table exists but has issues\r\n        // Re-throw to surface the actual problem\r\n        throw error;\r\n    } catch (error: unknown) {\r\n        const errorMessage = error instanceof Error ? error.message : String(error);\r\n        if (errorMessage.includes('does not exist') ||\r\n            errorMessage.includes('schema cache') ||\r\n            (errorMessage.includes('relation') && errorMessage.includes('does not exist'))) {\r\n            return false;\r\n        }\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * Get migration instructions\r\n */\r\nexport function getMigrationInstructions(): string {\r\n    return `\r\n╔══════════════════════════════════════════════════════════════╗\r\n║  MIGRATION REQUIRED                                          ║\r\n╚══════════════════════════════════════════════════════════════╝\r\n\r\nThe news_articles table does not exist. Please run the migration:\r\n\r\nOPTION 1: Supabase Dashboard (Recommended)\r\n1. Go to https://supabase.com/dashboard\r\n2. Select your project\r\n3. Go to SQL Editor\r\n4. Copy and paste the SQL from: Client/supabase/migrations/001_create_news_articles.sql\r\n5. Click \"Run\"\r\n\r\nOPTION 2: Supabase CLI\r\n  npx supabase db push\r\n\r\nOPTION 3: Run migration script\r\n  npm run migrate\r\n\r\nAfter running the migration, restart your Next.js server.\r\n  `;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAKO,eAAe;IAClB,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,uIAAQ,CAC3B,IAAI,CAAC,iBACL,MAAM,CAAC,MACP,KAAK,CAAC;QAEX,4BAA4B;QAC5B,IAAI,CAAC,OAAO,OAAO;QAEnB,0DAA0D;QAC1D,IAAI,MAAM,OAAO,EAAE,SAAS,qBACxB,MAAM,OAAO,EAAE,SAAS,mBACxB,MAAM,OAAO,EAAE,SAAS,eAAe,MAAM,OAAO,EAAE,SAAS,mBAAmB;YAClF,OAAO;QACX;QAEA,sDAAsD;QACtD,yCAAyC;QACzC,MAAM;IACV,EAAE,OAAO,OAAgB;QACrB,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;QACrE,IAAI,aAAa,QAAQ,CAAC,qBACtB,aAAa,QAAQ,CAAC,mBACrB,aAAa,QAAQ,CAAC,eAAe,aAAa,QAAQ,CAAC,mBAAoB;YAChF,OAAO;QACX;QACA,MAAM;IACV;AACJ;AAKO,SAAS;IACZ,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;EAqBV,CAAC;AACH"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///E:/NewsBlitz/Client/app/api/migrate/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { tableExists, getMigrationInstructions } from '../../../lib/supabase/migrate';\r\nimport { readFileSync } from 'fs';\r\nimport { join } from 'path';\r\n\r\n/**\r\n * Migration endpoint\r\n * Check migration status and provide instructions\r\n * \r\n * GET /api/migrate - Check if table exists and get migration SQL\r\n */\r\nexport async function GET() {\r\n    try {\r\n        const exists = await tableExists();\r\n\r\n        if (exists) {\r\n            return NextResponse.json({\r\n                migrated: true,\r\n                message: '✓ Table news_articles exists'\r\n            });\r\n        }\r\n\r\n        // Table doesn't exist - provide migration SQL\r\n        try {\r\n            const migrationPath = join(process.cwd(), 'supabase', 'migrations', '001_create_news_articles.sql');\r\n            const migrationSQL = readFileSync(migrationPath, 'utf-8');\r\n\r\n            return NextResponse.json({\r\n                migrated: false,\r\n                message: 'Table news_articles does not exist',\r\n                instructions: getMigrationInstructions(),\r\n                sql: migrationSQL,\r\n                steps: [\r\n                    '1. Go to https://supabase.com/dashboard',\r\n                    '2. Select your project',\r\n                    '3. Go to SQL Editor',\r\n                    '4. Copy the SQL from the \"sql\" field above',\r\n                    '5. Paste and run it'\r\n                ]\r\n            });\r\n        } catch {\r\n            return NextResponse.json({\r\n                migrated: false,\r\n                message: 'Table news_articles does not exist',\r\n                instructions: getMigrationInstructions(),\r\n                error: 'Could not read migration file'\r\n            });\r\n        }\r\n    } catch (error: unknown) {\r\n        const errorMessage = error instanceof Error ? error.message : 'Failed to check migration status';\r\n        return NextResponse.json(\r\n            {\r\n                error: errorMessage,\r\n                instructions: getMigrationInstructions()\r\n            },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAQO,eAAe;IAClB,IAAI;QACA,MAAM,SAAS,MAAM,IAAA,2IAAW;QAEhC,IAAI,QAAQ;YACR,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACrB,UAAU;gBACV,SAAS;YACb;QACJ;QAEA,8CAA8C;QAC9C,IAAI;YACA,MAAM,gBAAgB,IAAA,yGAAI,EAAC,QAAQ,GAAG,IAAI,YAAY,cAAc;YACpE,MAAM,eAAe,IAAA,6GAAY,EAAC,eAAe;YAEjD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACrB,UAAU;gBACV,SAAS;gBACT,cAAc,IAAA,wJAAwB;gBACtC,KAAK;gBACL,OAAO;oBACH;oBACA;oBACA;oBACA;oBACA;iBACH;YACL;QACJ,EAAE,OAAM;YACJ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACrB,UAAU;gBACV,SAAS;gBACT,cAAc,IAAA,wJAAwB;gBACtC,OAAO;YACX;QACJ;IACJ,EAAE,OAAO,OAAgB;QACrB,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC9D,OAAO,gJAAY,CAAC,IAAI,CACpB;YACI,OAAO;YACP,cAAc,IAAA,wJAAwB;QAC1C,GACA;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}